{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'bootstrap-icons/font/bootstrap-icons.css';// Import Bootstrap Icons\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[formData,setFormData]=useState({email:'',password:''});const[showPassword,setShowPassword]=useState(false);// State for password visibility\nconst handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const togglePasswordVisibility=()=>{setShowPassword(!showPassword);};const handleSubmit=async e=>{e.preventDefault();try{console.log('API Base URL:',process.env.REACT_APP_API_BASE_URL);// Debug log\nconst res=await axios.post(`${process.env.REACT_APP_API_BASE_URL}/api/auth/login`,formData);console.log('Response data:',res.data);if(!res.data.email){throw new Error('Email not received from server');}localStorage.setItem('token',res.data.token);localStorage.setItem('email',res.data.email);console.log('Email in localStorage:',localStorage.getItem('email'));alert('Login successful!');if(res.data.role==='customer'){window.location.href='/';}else if(res.data.role==='admin'){window.location.href='/AdminDashboard';}else{window.location.href='/VendorDashboard';}}catch(err){console.error('Login error:',err.response?err.response.data:err.message);alert('Enter valid details');}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container d-flex justify-content-center align-items-center\",style:{minHeight:'100vh'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4 shadow login-card\",style:{width:'350px'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",placeholder:\"Email\",value:formData.email,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',name:\"password\",className:\"form-control\",placeholder:\"Password\",value:formData.password,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-secondary\",onClick:togglePasswordVisibility,children:/*#__PURE__*/_jsx(\"i\",{className:showPassword?'bi bi-eye-slash':'bi bi-eye'})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/ForgotPassword\",className:\"text-primary\",children:\"Forgot Password?\"})})]})]})});}export default Login;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","email","password","showPassword","setShowPassword","handleChange","e","target","name","value","togglePasswordVisibility","handleSubmit","preventDefault","console","log","process","env","REACT_APP_API_BASE_URL","res","post","data","Error","localStorage","setItem","token","getItem","alert","role","window","location","href","err","error","response","message","className","style","minHeight","children","width","onSubmit","type","placeholder","onChange","required","onClick"],"sources":["D:/ITD/zepto2/zepto2/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport 'bootstrap-icons/font/bootstrap-icons.css'; // Import Bootstrap Icons\r\n\r\nfunction Login() {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const [showPassword, setShowPassword] = useState(false); // State for password visibility\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      console.log('API Base URL:', process.env.REACT_APP_API_BASE_URL); // Debug log\r\n      const res = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/api/auth/login`, formData);\r\n      console.log('Response data:', res.data);\r\n\r\n      if (!res.data.email) {\r\n        throw new Error('Email not received from server');\r\n      }\r\n\r\n      localStorage.setItem('token', res.data.token);\r\n      localStorage.setItem('email', res.data.email);\r\n      console.log('Email in localStorage:', localStorage.getItem('email'));\r\n\r\n      alert('Login successful!');\r\n\r\n      if (res.data.role === 'customer') {\r\n        window.location.href = '/';\r\n      } else if (res.data.role === 'admin') {\r\n        window.location.href = '/AdminDashboard';\r\n      } else {\r\n        window.location.href = '/VendorDashboard';\r\n      }\r\n    } catch (err) {\r\n      console.error('Login error:', err.response ? err.response.data : err.message);\r\n      alert('Enter valid details');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container d-flex justify-content-center align-items-center\" style={{ minHeight: '100vh' }}>\r\n      <div className=\"card p-4 shadow login-card\" style={{ width: '350px' }}>\r\n        <h2 className=\"text-center mb-4\">Login</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-3\">\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              className=\"form-control\"\r\n              placeholder=\"Email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <div className=\"input-group\">\r\n              <input\r\n                type={showPassword ? 'text' : 'password'}\r\n                name=\"password\"\r\n                className=\"form-control\"\r\n                placeholder=\"Password\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-secondary\"\r\n                onClick={togglePasswordVisibility}\r\n              >\r\n                <i className={showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'}></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"d-grid\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Login</button>\r\n          </div>\r\n          <div className=\"text-center mt-3\">\r\n            <a href=\"/ForgotPassword\" className=\"text-primary\">Forgot Password?</a>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}