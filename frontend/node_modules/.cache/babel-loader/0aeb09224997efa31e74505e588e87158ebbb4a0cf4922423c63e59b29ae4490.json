{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useParams}from'react-router-dom';import{useCart}from'../contexts/cartContext';import'../styles/product.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductPage(){const{id}=useParams();const[product,setProduct]=useState(null);const{addToCart,removeFromCart,cartItems}=useCart();useEffect(()=>{const fetchProduct=async()=>{try{console.log('Fetching product from:',`${process.env.REACT_APP_API_BASE_URL}/api/customers/${id}`);// Debug log\nconst res=await axios.get(`${process.env.REACT_APP_API_BASE_URL}/api/customers/${id}`);setProduct(res.data);}catch(err){console.error('Error fetching product:',err);}};fetchProduct();},[id]);const cartProduct=cartItems.find(item=>item.ProductID===(product===null||product===void 0?void 0:product.ProductID));const isOutOfStock=(product===null||product===void 0?void 0:product.ProductQuantity)===0;return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:product?/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:`card h-100 ${isOutOfStock?'out-of-stock':''}`,children:[/*#__PURE__*/_jsx(\"img\",{src:`data:image/png;base64,${product.ProductImage}`,className:\"card-img-top\",alt:product.ProductName,style:{height:'220px',objectFit:'cover'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:product.ProductName}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Brand: \",product.ProductBrand]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Price: \\u20B9\",product.ProductPrice]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-text\",children:[\"Rating:\",' ',Array.from({length:Math.floor(product.ProductRating||1)},(_,i)=>/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star text-warning\"},i)),Array.from({length:5-Math.floor(product.ProductRating||1)},(_,i)=>/*#__PURE__*/_jsx(\"i\",{className:\"far fa-star text-warning\"},i+Math.floor(product.ProductRating||1)))]}),isOutOfStock?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mt-2\",children:\"Out of Stock\"}):cartProduct?/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary\",onClick:()=>removeFromCart(product.ProductID),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:cartProduct.quantity}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary\",onClick:()=>addToCart(product),children:\"+\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>addToCart(product),children:\"Add to Cart\"})]})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading product details...\"})});}export default ProductPage;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","useCart","jsx","_jsx","jsxs","_jsxs","ProductPage","id","product","setProduct","addToCart","removeFromCart","cartItems","fetchProduct","console","log","process","env","REACT_APP_API_BASE_URL","res","get","data","err","error","cartProduct","find","item","ProductID","isOutOfStock","ProductQuantity","className","children","src","ProductImage","alt","ProductName","style","height","objectFit","ProductBrand","ProductPrice","Array","from","length","Math","floor","ProductRating","_","i","onClick","quantity"],"sources":["D:/ITD/zepto2/zepto2/src/components/productPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useCart } from '../contexts/cartContext';\r\nimport '../styles/product.css'\r\n\r\nfunction ProductPage() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n  const { addToCart, removeFromCart, cartItems } = useCart();\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        console.log('Fetching product from:', `${process.env.REACT_APP_API_BASE_URL}/api/customers/${id}`); // Debug log\r\n        const res = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/api/customers/${id}`);\r\n        setProduct(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching product:', err);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const cartProduct = cartItems.find((item) => item.ProductID === product?.ProductID);\r\n  const isOutOfStock = product?.ProductQuantity === 0;\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      {product ? (\r\n        <div className=\"col-lg-3\">\r\n          <div className={`card h-100 ${isOutOfStock ? 'out-of-stock' : ''}`}>\r\n            <img\r\n              src={`data:image/png;base64,${product.ProductImage}`}\r\n              className=\"card-img-top\"\r\n              alt={product.ProductName}\r\n              style={{ height: '220px', objectFit: 'cover' }}\r\n            />\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">{product.ProductName}</h5>\r\n              <p className=\"card-text\">Brand: {product.ProductBrand}</p>\r\n              <p className=\"card-text\">Price: â‚¹{product.ProductPrice}</p>\r\n              <div className=\"card-text\">\r\n                Rating:{' '}\r\n                {Array.from({ length: Math.floor(product.ProductRating || 1) }, (_, i) => (\r\n                  <i key={i} className=\"fas fa-star text-warning\" />\r\n                ))}\r\n                {Array.from({ length: 5 - Math.floor(product.ProductRating || 1) }, (_, i) => (\r\n                  <i key={i + Math.floor(product.ProductRating || 1)} className=\"far fa-star text-warning\" />\r\n                ))}\r\n              </div>\r\n              {isOutOfStock ? (\r\n                <p className=\"text-danger mt-2\">Out of Stock</p>\r\n              ) : cartProduct ? (\r\n                <div className=\"d-flex align-items-center\">\r\n                  <button\r\n                    className=\"btn btn-sm btn-outline-secondary\"\r\n                    onClick={() => removeFromCart(product.ProductID)}\r\n                  >\r\n                    -\r\n                  </button>\r\n                  <span className=\"mx-2\">{cartProduct.quantity}</span>\r\n                  <button\r\n                    className=\"btn btn-sm btn-outline-secondary\"\r\n                    onClick={() => addToCart(product)}\r\n                  >\r\n                    +\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => addToCart(product)}\r\n                >\r\n                  Add to Cart\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p>Loading product details...</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}