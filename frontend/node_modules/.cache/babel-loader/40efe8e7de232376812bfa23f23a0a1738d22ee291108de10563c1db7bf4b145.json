{"ast":null,"code":"import React,{createContext,useState,useContext}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const CartProvider=_ref=>{let{children}=_ref;const[cartItems,setCartItems]=useState([]);const[isLoggedIn,setIsLoggedIn]=useState(false);const addToCart=product=>{setCartItems(prevItems=>{const existingItem=prevItems.find(item=>item.ProductID===product.ProductID);const availableStock=parseInt(product.ProductQuantity);if(isNaN(availableStock)){alert(`Invalid stock value for ${product.ProductName}`);return prevItems;}if(availableStock===0){alert(`${product.ProductName} is out of stock.`);return prevItems;}if(existingItem){if(existingItem.quantity>=availableStock){alert(`Only ${availableStock} in stock.`);return prevItems;}return prevItems.map(item=>item.ProductID===product.ProductID?{...item,quantity:item.quantity+1}:item);}else{return[...prevItems,{...product,quantity:1}];}});};const removeFromCart=productId=>{setCartItems(prevItems=>{const existingItem=prevItems.find(item=>item.ProductID===productId);if(existingItem.quantity===1){return prevItems.filter(item=>item.ProductID!==productId);}return prevItems.map(item=>item.ProductID===productId?{...item,quantity:item.quantity-1}:item);});};const clearCart=()=>{setCartItems([]);};const cartTotal=cartItems.reduce((total,item)=>total+parseFloat(item.ProductPrice)*item.quantity,0);const cartCount=cartItems.reduce((count,item)=>count+item.quantity,0);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartItems,addToCart,removeFromCart,clearCart,cartTotal,cartCount},children:children});};export const useCart=()=>{return useContext(CartContext);};","map":{"version":3,"names":["React","createContext","useState","useContext","jsx","_jsx","CartContext","CartProvider","_ref","children","cartItems","setCartItems","isLoggedIn","setIsLoggedIn","addToCart","product","prevItems","existingItem","find","item","ProductID","availableStock","parseInt","ProductQuantity","isNaN","alert","ProductName","quantity","map","removeFromCart","productId","filter","clearCart","cartTotal","reduce","total","parseFloat","ProductPrice","cartCount","count","Provider","value","useCart"],"sources":["D:/ITD/zepto2/zepto2/frontend/src/contexts/cartContext.js"],"sourcesContent":["import React, { createContext, useState, useContext } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  const addToCart = (product) => {\r\n    setCartItems((prevItems) => {\r\n      const existingItem = prevItems.find(item => item.ProductID === product.ProductID);\r\n      const availableStock = parseInt(product.ProductQuantity);\r\n\r\n      if (isNaN(availableStock)) {\r\n        alert(`Invalid stock value for ${product.ProductName}`);\r\n        return prevItems;\r\n      }\r\n\r\n      if (availableStock === 0) {\r\n        alert(`${product.ProductName} is out of stock.`);\r\n        return prevItems;\r\n      }\r\n\r\n      if (existingItem) {\r\n        if (existingItem.quantity >= availableStock) {\r\n          alert(`Only ${availableStock} in stock.`);\r\n          return prevItems;\r\n        }\r\n\r\n        return prevItems.map(item =>\r\n          item.ProductID === product.ProductID\r\n            ? { ...item, quantity: item.quantity + 1 }\r\n            : item\r\n        );\r\n      } else {\r\n        return [...prevItems, { ...product, quantity: 1 }];\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (productId) => {\r\n    setCartItems((prevItems) => {\r\n      const existingItem = prevItems.find(item => item.ProductID === productId);\r\n\r\n      if (existingItem.quantity === 1) {\r\n        return prevItems.filter(item => item.ProductID !== productId);\r\n      }\r\n\r\n      return prevItems.map(item =>\r\n        item.ProductID === productId\r\n          ? { ...item, quantity: item.quantity - 1 }\r\n          : item\r\n      );\r\n    });\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCartItems([]);\r\n  };\r\n\r\n  const cartTotal = cartItems.reduce(\r\n    (total, item) => total + (parseFloat(item.ProductPrice) * item.quantity),\r\n    0\r\n  );\r\n\r\n  const cartCount = cartItems.reduce(\r\n    (count, item) => count + item.quantity,\r\n    0\r\n  );\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        cartItems,\r\n        addToCart,\r\n        removeFromCart,\r\n        clearCart,\r\n        cartTotal,\r\n        cartCount\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => {\r\n  return useContext(CartContext);\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}