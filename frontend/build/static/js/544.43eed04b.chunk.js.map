{"version":3,"file":"static/js/544.43eed04b.chunk.js","mappings":"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","sources":["pages/prevOrder.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst OrderHistory = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchOrderHistory = async () => {\r\n      try {\r\n        const email = localStorage.getItem('email');\r\n        if (!email) {\r\n          setError('Please log in to view your order history.');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        console.log('Fetching order history from:', `${process.env.REACT_APP_API_BASE_URL}/api/customers/orders/history/${email}`); // Debug log\r\n        const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/api/customers/orders/history/${email}`);\r\n        console.log('Fetched orders:', response.data); // Log to verify ProductImage\r\n        setOrders(response.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching order history:', err);\r\n        setError('Failed to fetch order history: ' + (err.response?.data?.message || err.message));\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrderHistory();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-5\">\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n          <span className=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"alert alert-danger mt-5\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2 className=\"mb-4\">\r\n        Your Order History{' '}\r\n        {orders.length > 0 && <small className=\"text-muted\">({orders.length} orders)</small>}\r\n      </h2>\r\n      {orders.length === 0 ? (\r\n        <div className=\"text-center mt-5\">\r\n          <img src=\"/images/empty-cart.png\" alt=\"Empty Cart\" style={{ width: '100px', height: '100px' }} />\r\n          <p className=\"lead mt-3\">You haven't placed any orders yet.</p>\r\n          <button className=\"btn btn-primary\" onClick={() => navigate('/Home')}>\r\n            Start Shopping\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        orders.map((order) => (\r\n          <div key={order._id} className=\"card mb-4 shadow-sm\">\r\n            <div className=\"card-header bg-light\">\r\n              <h5 className=\"mb-0\">Order ID: <code>{order._id}</code></h5>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"mb-2\">\r\n                <strong>Total:</strong> ₹{order.total.toFixed(2)}\r\n              </div>\r\n              <div className=\"mb-2\">\r\n                <strong>Date:</strong>{' '}\r\n                {new Date(order.createdAt).toLocaleString('en-US', {\r\n                  year: 'numeric',\r\n                  month: 'long',\r\n                  day: 'numeric',\r\n                  hour: 'numeric',\r\n                  minute: 'numeric',\r\n                  hour12: true,\r\n                })}\r\n              </div>\r\n              {order.address && (\r\n                <div className=\"mb-3\">\r\n                  <strong>Delivery Address:</strong>\r\n                  <p className=\"mb-0\">\r\n                    {order.address.label}: {order.address.addressLine1}, {order.address.houseNo}, {order.address.building}\r\n                    {order.address.landmark ? `, ${order.address.landmark}` : ''}\r\n                  </p>\r\n                </div>\r\n              )}\r\n              <h6 className=\"mt-3\">Items Ordered:</h6>\r\n              <ul className=\"list-group list-group-flush\">\r\n                {order.items.map((item, index) => (\r\n                  <li key={index} className=\"list-group-item d-flex align-items-center\">\r\n                    <img\r\n                      src={item.ProductImage ? `data:image/png;base64,${item.ProductImage}` : '/images/placeholder.png'}\r\n                      alt={item.ProductName}\r\n                      className=\"rounded\"\r\n                      style={{ width: '60px', height: '60px', objectFit: 'cover', marginRight: '15px' }}\r\n                    />\r\n                    <div className=\"flex-grow-1\">\r\n                      <strong>{item.ProductName || 'Unnamed Product'}</strong>\r\n                      <div className=\"text-muted small\">\r\n                        ₹{item.ProductPrice?.toFixed(2) || '0.00'} x {item.ProductQuantity || 0}\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderHistory;"],"names":["OrderHistory","orders","setOrders","useState","loading","setLoading","error","setError","navigate","useNavigate","useEffect","async","email","localStorage","getItem","console","log","response","axios","get","data","err","_err$response","_err$response$data","message","fetchOrderHistory","_jsx","className","children","role","_jsxs","length","src","alt","style","width","height","onClick","map","order","_id","total","toFixed","Date","createdAt","toLocaleString","year","month","day","hour","minute","hour12","address","label","addressLine1","houseNo","building","landmark","items","item","index","_item$ProductPrice","ProductImage","ProductName","objectFit","marginRight","ProductPrice","ProductQuantity"],"sourceRoot":""}