"use strict";(self.webpackChunkzepto2=self.webpackChunkzepto2||[]).push([[544],{3544:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var a=r(5043),t=r(6213),d=r(8231),l=r(579);const i=()=>{const[e,s]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[c,n]=(0,a.useState)(null),o=(0,d.Zp)();return(0,a.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("email");if(!e)return n("Please log in to view your order history."),void i(!1);console.log("Fetching order history from:",`http://15.207.88.145:5000/api/customers/orders/history/${e}`);const r=await t.A.get(`http://15.207.88.145:5000/api/customers/orders/history/${e}`);console.log("Fetched orders:",r.data),s(r.data),i(!1)}catch(a){var e,r;console.error("Error fetching order history:",a),n("Failed to fetch order history: "+((null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||a.message)),i(!1)}})()}),[]),r?(0,l.jsx)("div",{className:"d-flex justify-content-center mt-5",children:(0,l.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):c?(0,l.jsx)("div",{className:"alert alert-danger mt-5",children:c}):(0,l.jsxs)("div",{className:"container mt-4",children:[(0,l.jsxs)("h2",{className:"mb-4",children:["Your Order History"," ",e.length>0&&(0,l.jsxs)("small",{className:"text-muted",children:["(",e.length," orders)"]})]}),0===e.length?(0,l.jsxs)("div",{className:"text-center mt-5",children:[(0,l.jsx)("img",{src:"/images/empty-cart.png",alt:"Empty Cart",style:{width:"100px",height:"100px"}}),(0,l.jsx)("p",{className:"lead mt-3",children:"You haven't placed any orders yet."}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>o("/Home"),children:"Start Shopping"})]}):e.map((e=>(0,l.jsxs)("div",{className:"card mb-4 shadow-sm",children:[(0,l.jsx)("div",{className:"card-header bg-light",children:(0,l.jsxs)("h5",{className:"mb-0",children:["Order ID: ",(0,l.jsx)("code",{children:e._id})]})}),(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("strong",{children:"Total:"})," \u20b9",e.total.toFixed(2)]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("strong",{children:"Date:"})," ",new Date(e.createdAt).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})]}),e.address&&(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("strong",{children:"Delivery Address:"}),(0,l.jsxs)("p",{className:"mb-0",children:[e.address.label,": ",e.address.addressLine1,", ",e.address.houseNo,", ",e.address.building,e.address.landmark?`, ${e.address.landmark}`:""]})]}),(0,l.jsx)("h6",{className:"mt-3",children:"Items Ordered:"}),(0,l.jsx)("ul",{className:"list-group list-group-flush",children:e.items.map(((e,s)=>{var r;return(0,l.jsxs)("li",{className:"list-group-item d-flex align-items-center",children:[(0,l.jsx)("img",{src:e.ProductImage?`data:image/png;base64,${e.ProductImage}`:"/images/placeholder.png",alt:e.ProductName,className:"rounded",style:{width:"60px",height:"60px",objectFit:"cover",marginRight:"15px"}}),(0,l.jsxs)("div",{className:"flex-grow-1",children:[(0,l.jsx)("strong",{children:e.ProductName||"Unnamed Product"}),(0,l.jsxs)("div",{className:"text-muted small",children:["\u20b9",(null===(r=e.ProductPrice)||void 0===r?void 0:r.toFixed(2))||"0.00"," x ",e.ProductQuantity||0]})]})]},s)}))})]})]},e._id)))]})}}}]);
//# sourceMappingURL=544.43eed04b.chunk.js.map