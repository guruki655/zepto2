"use strict";(self.webpackChunkzepto2=self.webpackChunkzepto2||[]).push([[372],{3372:(e,a,s)=>{s.r(a),s.d(a,{default:()=>i});var t=s(5043),n=s(6213),r=s(8231),l=s(579);const i=function(){const[e,a]=(0,t.useState)({name:"",email:"",password:"",role:"",phone:"",otp:""}),[s,i]=(0,t.useState)({name:"",email:"",password:"",role:"",phone:"",otp:""}),[o,d]=(0,t.useState)(!1),c=(0,r.Zp)(),m=s=>{a({...e,[s.target.name]:s.target.value})},p=async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(/^[6-9]\d{9}$/.test(e.phone))try{console.log("Sending OTP to:","http://13.233.144.153/api/auth/send-otp");await n.A.post("http://13.233.144.153/api/auth/send-otp",{phone:e.phone});alert(s?"OTP resent successfully!":"OTP sent successfully!"),a({...e,otp:""})}catch(t){t.response&&t.response.data&&"Phone number already registered"===t.response.data.message?alert("Phone number already registered!"):alert("Failed to send OTP!")}else alert("Enter a valid 10-digit phone number starting with 6-9.")};return(0,l.jsx)("div",{className:"register-container d-flex justify-content-center align-items-center",children:(0,l.jsxs)("div",{className:"card p-4 shadow register-card",children:[(0,l.jsx)("h2",{className:"text-center mb-4",children:"Register"}),o?(0,l.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),!(()=>{let a=!0;const s={};o?(e.name?/^[A-Za-z\s]+$/.test(e.name)?(e.name.length<2||e.name.length>50)&&(s.name="Name must be between 2 and 50 characters.",a=!1):(s.name="Name must contain only letters and spaces.",a=!1):(s.name="Name is required.",a=!1),e.email?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.email)?(e.email.includes("..")||e.email.startsWith(".")||e.email.includes(".@")||2!==e.email.split("@").length||e.email.split("@")[1].startsWith("-"))&&(s.email="Please enter a valid email address.",a=!1):(s.email="Please enter a valid email address.",a=!1):(s.email="Email is required.",a=!1),e.password?e.password.length<6&&(s.password="Password must be at least 6 characters.",a=!1):(s.password="Password is required.",a=!1),e.role||(s.role="Role is required.",a=!1)):(e.phone?/^[6-9]\d{9}$/.test(e.phone)||(s.phone="Phone number must be 10 digits and start with 6-9.",a=!1):(s.phone="Phone number is required.",a=!1),e.otp||(s.otp="OTP is required.",a=!1));return i(s),a})())return;const{name:s,email:t,password:r,role:l,phone:d}=e;try{console.log("Registering at:","http://13.233.144.153/api/auth/register");await n.A.post("http://13.233.144.153/api/auth/register",{name:s,email:t,password:r,role:l,phone:d});alert("Registered successfully!"),c("/login")}catch(m){alert("Registration failed. Try again!")}},children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("input",{name:"name",className:"form-control",placeholder:"Name",value:e.name,onChange:m,required:!0}),s.name&&(0,l.jsx)("small",{className:"text-danger",children:s.name})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Email",value:e.email,onChange:m,required:!0}),s.email&&(0,l.jsx)("small",{className:"text-danger",children:s.email})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",value:e.password,onChange:m,required:!0}),s.password&&(0,l.jsx)("small",{className:"text-danger",children:s.password})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("select",{name:"role",className:"form-select",value:e.role,onChange:m,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select Role"}),(0,l.jsx)("option",{value:"admin",children:"Admin"}),(0,l.jsx)("option",{value:"vendor",children:"Vendor"}),(0,l.jsx)("option",{value:"customer",children:"Customer"})]}),s.role&&(0,l.jsx)("small",{className:"text-danger",children:s.role})]}),(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)("input",{type:"text",className:"form-control",value:e.phone,readOnly:!0,disabled:!0})}),(0,l.jsx)("div",{className:"d-grid",children:(0,l.jsx)("button",{type:"submit",className:"btn btn-success",children:"Register"})})]}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("input",{type:"text",name:"phone",className:"form-control",placeholder:"Phone Number",value:e.phone,onChange:m,required:!0}),s.phone&&(0,l.jsx)("small",{className:"text-danger",children:s.phone})]}),(0,l.jsx)("button",{type:"button",className:"btn btn-primary w-100 mb-2",onClick:p,children:"Send OTP"}),(0,l.jsxs)("div",{className:"mb-3 mt-3",children:[(0,l.jsx)("input",{type:"text",name:"otp",className:"form-control",placeholder:"Enter OTP",value:e.otp,onChange:m,required:!0}),s.otp&&(0,l.jsx)("small",{className:"text-danger",children:s.otp})]}),(0,l.jsx)("button",{type:"button",className:"btn btn-success w-100 mb-2",onClick:async()=>{try{console.log("Verifying OTP at:","http://13.233.144.153/api/auth/verify-otp");(await n.A.post("http://13.233.144.153/api/auth/verify-otp",{phone:e.phone,otp:e.otp})).data.success?(d(!0),alert("OTP verified successfully!")):alert("Invalid OTP")}catch(a){alert("Error verifying OTP")}},children:"Verify OTP"}),(0,l.jsx)("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>{p(!0)},children:"Resend OTP"})]})]})})}}}]);
//# sourceMappingURL=372.aec57c15.chunk.js.map