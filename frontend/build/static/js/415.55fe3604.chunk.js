"use strict";(self.webpackChunkzepto2=self.webpackChunkzepto2||[]).push([[415],{3415:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var s=a(5043),r=a(8231),o=a(6213),c=a(4432),l=a(579);const i=function(){const{categoryName:e}=(0,r.g)(),t=(0,r.Zp)(),{addToCart:a,removeFromCart:i,cartItems:n}=(0,c._)(),[d,u]=(0,s.useState)([]),[h,p]=(0,s.useState)([]),[m,x]=(0,s.useState)(null),[g,j]=(0,s.useState)("default"),[b,N]=(0,s.useState)(!0),[f,y]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{N(!0),console.log("Fetching products from:","http://13.233.144.153/api/customers");const t=(await o.A.get("http://13.233.144.153/api/customers")).data,a=e.toLowerCase(),s=t.filter((e=>e.ProductType.toLowerCase()===a)),r=[...new Set(s.map((e=>e.ProductSubType)))].sort();p(s),u(r),N(!1)}catch(t){console.error("Error fetching data:",t),y("Failed to load data. Please try again."),N(!1)}})()}),[e]);const P=e=>{let{product:t}=e;const s=n.find((e=>e.ProductID===t.ProductID)),r=s?s.quantity:0;return(0,l.jsx)("div",{className:"col-lg-3",style:{cursor:"pointer",marginBottom:"20px"},children:(0,l.jsxs)("div",{className:"card h-100",style:{display:"flex",flexDirection:"column"},children:[(0,l.jsx)("img",{src:`data:image/png;base64,${t.ProductImage}`,className:"card-img-top",alt:t.ProductName,style:{height:"200px",objectFit:"cover"}}),(0,l.jsxs)("div",{className:"card-body",style:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"card-title",children:t.ProductName}),(0,l.jsxs)("p",{className:"card-text",children:["Brand: ",t.ProductBrand]}),(0,l.jsxs)("p",{className:"card-text",children:["Price: \u20b9",t.ProductPrice]}),(0,l.jsxs)("div",{className:"card-text",children:["Rating:"," ",Array.from({length:Math.floor(t.ProductRating||1)},((e,t)=>(0,l.jsx)("i",{className:"fas fa-star text-warning"},t))),Array.from({length:5-Math.floor(t.ProductRating||1)},((e,a)=>(0,l.jsx)("i",{className:"far fa-star text-warning"},a+Math.floor(t.ProductRating||1))))]})]}),s?(0,l.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[(0,l.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:e=>{e.stopPropagation(),i(t.ProductID)},children:"-"}),(0,l.jsx)("span",{className:"mx-2",children:r}),(0,l.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:e=>{e.stopPropagation(),a(t)},children:"+"})]}):(0,l.jsx)("button",{className:"btn btn-primary mt-2",onClick:e=>{e.stopPropagation(),a(t)},children:"Add to Cart"})]})]})})};let v=m?h.filter((e=>e.ProductSubType.toLowerCase()===m.toLowerCase())):h;return v=[...v].sort(((e,t)=>{const a=parseFloat(e.ProductPrice),s=parseFloat(t.ProductPrice),r=parseFloat(e.ProductRating),o=parseFloat(t.ProductRating);return"price-low"===g?a-s:"price-high"===g?s-a:"rating-high"===g?o-r:0})),(0,l.jsxs)("div",{className:"category-page",children:[(0,l.jsxs)("div",{className:"zepto-sidebar",children:[(0,l.jsxs)("div",{className:"-loop-sidebar-header",children:[(0,l.jsxs)("h5",{children:[e," Subcategories"]}),(0,l.jsx)("button",{className:"btn btn-close",onClick:()=>t("/")})]}),(0,l.jsx)("div",{className:"zepto-sidebar-body",children:b?(0,l.jsx)("p",{children:"Loading subcategories..."}):f?(0,l.jsx)("p",{className:"zepto-sidebar-error",children:f}):(0,l.jsx)("ul",{children:d.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("li",{className:"zepto-sidebar-item "+(null===m?"active":""),onClick:()=>x(null),style:{cursor:"pointer"},children:"All"}),d.map(((e,t)=>(0,l.jsx)("li",{className:"zepto-sidebar-item "+(m===e?"active":""),onClick:()=>x(e),style:{cursor:"pointer"},children:e},t)))]}):(0,l.jsx)("li",{className:"zepto-sidebar-item",children:"No subcategories available"})})})]}),(0,l.jsxs)("div",{className:"category-content",children:[(0,l.jsx)("h2",{children:e}),(0,l.jsx)("div",{className:"sort-container",children:(0,l.jsxs)("select",{className:"sort-select",value:g,onChange:e=>j(e.target.value),children:[(0,l.jsx)("option",{value:"default",children:"Sort by: Default"}),(0,l.jsx)("option",{value:"price-low",children:"Sort by: Price Low to High"}),(0,l.jsx)("option",{value:"price-high",children:"Sort by: Price High to Low"}),(0,l.jsx)("option",{value:"rating-high",children:"Sort by: Rating High to Low"})]})}),b?(0,l.jsx)("p",{children:"Loading products..."}):f?(0,l.jsx)("p",{className:"zepto-sidebar-error",children:f}):v.length>0?(0,l.jsx)("div",{className:"row",style:{display:"flex",flexWrap:"wrap"},children:v.map((e=>(0,l.jsx)(P,{product:e},e._id)))},"product-grid"):(0,l.jsxs)("p",{children:["No products available for ",m||e,"."]})]})]})}}}]);
//# sourceMappingURL=415.55fe3604.chunk.js.map