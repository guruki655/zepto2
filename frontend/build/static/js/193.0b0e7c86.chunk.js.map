{"version":3,"file":"static/js/193.0b0e7c86.chunk.js","mappings":"iIA6JIA,E,wCA7JAC,EAAgB,QAMhBC,EAAS,wBACTC,EAAgB,GAAGC,OAAOF,EAAQ,KAAKE,OAAOH,EAAe,cAC7DI,EAAe,4CACfC,EAAsB,8DACtBC,EAA0B,mJAsB1BC,EAAe,SAAsBC,GACvC,IAAIC,EAAcD,IAAWA,EAAOE,qBAAuB,8BAAgC,GACvFC,EAASC,SAASC,cAAc,UACpCF,EAAOG,IAAM,GAAGX,OAAOD,GAAeC,OAAOM,GAC7C,IAAIM,EAAaH,SAASI,MAAQJ,SAASK,KAE3C,IAAKF,EACH,MAAM,IAAIG,MAAM,+EAIlB,OADAH,EAAWI,YAAYR,GAChBA,CACT,EAcIS,EAAkB,KAClBC,EAAkB,KAClBC,EAAiB,KAoBjBC,EAAa,SAAoBf,GAEnC,OAAwB,OAApBY,EACKA,GAGTA,EAAkB,IAAII,SAAQ,SAAUC,EAASC,GAC/C,GAAsB,qBAAXC,QAA8C,qBAAbf,SAW5C,GAJIe,OAAOC,QAAUpB,GACnBqB,QAAQC,KAAKxB,GAGXqB,OAAOC,OACTH,EAAQE,OAAOC,aAIjB,IACE,IAAIjB,EAxFO,WAGf,IAFA,IALyCoB,EAKrCC,EAAUpB,SAASqB,iBAAiB,gBAAiB9B,OAAOF,EAAQ,OAE/DiC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAAK,CACvC,IAAIvB,EAASqB,EAAQE,GAErB,GAVuCH,EAUpBpB,EAAOG,IATrBV,EAAagC,KAAKL,IAAQ1B,EAAoB+B,KAAKL,GAaxD,OAAOpB,CACT,CAEA,OAAO,IACT,CA0EmB0B,GAEb,GAAI1B,GAAUH,EACZqB,QAAQC,KAAKxB,QACR,GAAKK,GAEL,GAAIA,GAA6B,OAAnBW,GAA+C,OAApBD,EAA0B,CACxE,IAAIiB,EAGJ3B,EAAO4B,oBAAoB,OAAQjB,GACnCX,EAAO4B,oBAAoB,QAASlB,GAGS,QAA5CiB,EAAqB3B,EAAO6B,kBAA+C,IAAvBF,GAAyCA,EAAmBG,YAAY9B,GAC7HA,EAASJ,EAAaC,EACxB,OAXEG,EAASJ,EAAaC,GAaxBc,EApDO,SAAgBG,EAASC,GACpC,OAAO,WACDC,OAAOC,OACTH,EAAQE,OAAOC,QAEfF,EAAO,IAAIR,MAAM,2BAErB,CACF,CA4CuBwB,CAAOjB,EAASC,GACjCL,EA7DQ,SAAiBK,GAC7B,OAAO,SAAUiB,GACfjB,EAAO,IAAIR,MAAM,2BAA4B,CAC3CyB,MAAOA,IAEX,CACF,CAuDwBC,CAAQlB,GAC1Bf,EAAOkC,iBAAiB,OAAQvB,GAChCX,EAAOkC,iBAAiB,QAASxB,EACnC,CAAE,MAAOyB,GAEP,YADApB,EAAOoB,EAET,MAvCErB,EAAQ,KAwCZ,KAE8B,OAAE,SAAUqB,GAExC,OADA1B,EAAkB,KACXI,QAAQE,OAAOoB,EACxB,GACF,EAsBIC,GAAa,EAEbC,EAAmB,WACrB,OAAIjD,IAIJA,EAAgBwB,EAAW,MAAa,OAAE,SAAUuB,GAGlD,OADA/C,EAAgB,KACTyB,QAAQE,OAAOoB,EACxB,IAEF,EAIAtB,QAAQC,UAAUwB,MAAK,WACrB,OAAOD,GACT,IAAU,OAAE,SAAUF,GACfC,GACHlB,QAAQC,KAAKgB,EAEjB,IACA,I,SChLA,MAAM/C,EDgLW,WACf,IAAK,IAAImD,EAAOC,UAAUhB,OAAQiB,EAAO,IAAIC,MAAMH,GAAOI,EAAO,EAAGA,EAAOJ,EAAMI,IAC/EF,EAAKE,GAAQH,UAAUG,GAGzBP,GAAa,EACb,IAAIQ,EAAYC,KAAKC,MAErB,OAAOT,IAAmBC,MAAK,SAAUS,GACvC,OAtDa,SAAoBA,EAAaN,EAAMG,GACtD,GAAoB,OAAhBG,EACF,OAAO,KAGT,IACIC,EADKP,EAAK,GACKQ,MAAM,YAErBC,EA/I2B,SAAoCA,GACnE,OAAmB,IAAZA,EAAgB,KAAOA,CAChC,CA6IgBC,CAA2BJ,EAAYG,SACjDE,EAAkB/D,EAElB2D,GAAaE,IAAYE,GAC3BlC,QAAQC,KAAK,aAAa3B,OAAO0D,EAAS,mDAAmD1D,OAAO,QAAS,wBAAwBA,OAAO4D,EAAiB,yHAG/J,IAAIC,EAASN,EAAYO,WAAMC,EAAWd,GAE1C,OA5GoB,SAAyBY,EAAQT,GAChDS,GAAWA,EAAOG,kBAIvBH,EAAOG,iBAAiB,CACtBC,KAAM,YACNP,QAAS,QACTN,UAAWA,GAEf,CAiGEc,CAAgBL,EAAQT,GACjBS,CACT,CAoCWM,CAAWZ,EAAaN,EAAMG,EACvC,GACF,CC3LsBgB,CAAW,+GA8JjC,EA5JyBC,KAAO,IAADC,EAC7B,MAAM,UAAEC,EAAS,UAAEC,EAAS,UAAEC,IAAcC,EAAAA,EAAAA,KACtCC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACVC,EAAcC,IAAmBC,EAAAA,EAAAA,UAAS,OAC1CC,EAAWC,IAAgBF,EAAAA,EAAAA,WAAS,GAGrCG,GAAmC,QAAdd,EAAAO,EAASQ,aAAK,IAAAf,OAAA,EAAdA,EAAgBc,qBAAsBZ,GAEjEc,EAAAA,EAAAA,YAAU,KACYC,WAClB,IACE,MAAMC,EAAQC,aAAaC,QAAQ,SAC7BC,EAAgBC,KAAKC,MAAMJ,aAAaC,QAAQ,gBACtD,GAAIC,GAAiBA,EAAcG,aAEjC,YADAd,EAAgBW,GAIlB,GAAIH,EAAO,CACT9D,QAAQqE,IAAI,yBAA0B,yDACtC,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,wDAAqE,CACpGC,QAAS,CAAEC,cAAe,UAAUZ,OAElCQ,EAASK,KAAKC,UAChBtB,EAAgBgB,EAASK,KAAKC,SAC9Bb,aAAac,QAAQ,cAAeX,KAAKY,UAAUR,EAASK,KAAKC,UAErE,CACF,CAAE,MAAO3D,GACPjB,QAAQiB,MAAM,yBAA0BA,GACxC,IACE,MAAMgD,EAAgBC,KAAKC,MAAMJ,aAAaC,QAAQ,gBAClDC,GAAiBA,EAAcG,aACjCd,EAAgBW,GAEhBX,EAAgB,KAEpB,CAAE,MAAOyB,GACP/E,QAAQiB,MAAM,6BAA8B8D,GAC5CzB,EAAgB,KAClB,CACF,GAEF0B,EAAa,GACZ,IAyDH,OACEC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0DAA0DC,MAAO,CAAEC,UAAW,QAASC,QAAS,QAASC,SAAA,CACrHjC,IACC4B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAwBC,MAAO,CAAEI,SAAU,SAAUD,SAAA,EAClEE,EAAAA,EAAAA,KAAA,MAAAF,SAAI,kBACJL,EAAAA,EAAAA,MAAA,KAAAK,SAAA,CACGjC,EAAaoC,MAAM,KAAGpC,EAAae,aAAa,KAAGf,EAAaqC,QAAQ,KAAGrC,EAAasC,SACxFtC,EAAauC,SAAW,KAAKvC,EAAauC,WAAa,GAAIvC,EAAawC,QAAU,KAAKxC,EAAawC,UAAY,UAKvHZ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA2BC,MAAO,CAAEI,SAAU,SAAUD,SAAA,EACrEE,EAAAA,EAAAA,KAAA,MAAAF,SAAI,mBACJL,EAAAA,EAAAA,MAAA,KAAAK,SAAA,CAAG,mBAAYxC,EAAUgD,QAAQ,OACjCb,EAAAA,EAAAA,MAAA,KAAAK,SAAA,CAAG,oBAAaxC,EAAYY,GAAoBoC,QAAQ,OACxDN,EAAAA,EAAAA,KAAA,KAAAF,UAAGL,EAAAA,EAAAA,MAAA,UAAAK,SAAA,CAAQ,gBAAS5B,EAAmBoC,QAAQ,YAGjDN,EAAAA,EAAAA,KAAA,OAAKN,UAAU,kBAAiBI,UAC9BL,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0CAA0CC,MAAO,CAAEY,WAAY,4CAA6CC,aAAc,OAAQC,MAAO,QAASC,OAAQ,SAAUZ,SAAA,EACjLL,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kEAAiEI,SAAA,EAC9EE,EAAAA,EAAAA,KAAA,OAAKN,UAAU,OAAOC,MAAO,CAAEc,MAAO,OAAQC,OAAQ,OAAQH,WAAY,UAAWC,aAAc,UACnGR,EAAAA,EAAAA,KAAA,OAAKN,UAAU,QAAQC,MAAO,CAAEgB,SAAU,OAAQC,WAAY,QAASd,SAAC,aAE1EE,EAAAA,EAAAA,KAAA,OAAKN,UAAU,mBAAmBC,MAAO,CAAEgB,SAAU,OAAQE,cAAe,OAAQf,SAAC,yBAGrFL,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6CAA4CI,SAAA,EACzDL,EAAAA,EAAAA,MAAA,OAAAK,SAAA,EACEE,EAAAA,EAAAA,KAAA,OAAKN,UAAU,QAAQC,MAAO,CAAEgB,SAAU,QAASb,SAAC,iBACpDE,EAAAA,EAAAA,KAAA,OAAKN,UAAU,QAAQC,MAAO,CAAEgB,SAAU,QAASb,SAAC,kBAEtDL,EAAAA,EAAAA,MAAA,OAAAK,SAAA,EACEE,EAAAA,EAAAA,KAAA,OAAKN,UAAU,QAAQC,MAAO,CAAEgB,SAAU,QAASb,SAAC,aACpDE,EAAAA,EAAAA,KAAA,OAAKN,UAAU,QAAQC,MAAO,CAAEgB,SAAU,QAASb,SAAC,0BAM5DE,EAAAA,EAAAA,KAAA,OAAKN,UAAU,wCAAwCC,MAAO,CAAEc,MAAO,SAAUX,UAC/EL,EAAAA,EAAAA,MAAA,QAAMqB,SAjGWzC,UACrB0C,EAAEC,iBACF/C,GAAa,GAEb,MAAMgD,EAAQ1C,aAAaC,QAAQ,SACnC,IAAKyC,GAAmB,cAAVA,EAIZ,OAHAC,MAAM,wBACNzD,EAAS,eACTQ,GAAa,GAIf,IAAKJ,IAAiBA,EAAae,aAIjC,OAHAsC,MAAM,kCACNzD,EAAS,cACTQ,GAAa,GAIf,MAAMkD,EAAY,CAChBF,QACAG,MAAO/D,EAAUgE,KAAKC,IAAI,CACxBC,UAAWD,EAAKC,UAChBC,YAAaF,EAAKE,YAClBC,aAAcC,WAAWJ,EAAKG,cAC9BE,gBAAiBL,EAAKM,SACtBC,aAAcP,EAAKO,iBAErBC,MAAO5D,EACPkB,QAASvB,GAGXrD,QAAQqE,IAAI,yBAA0BsC,GAEtC,IACE3G,QAAQqE,IAAI,gCAAiC,mEAC7C,MAAMC,QAAiBC,EAAAA,EAAMgD,KAAK,kEAA+EZ,GACjH3G,QAAQqE,IAAI,6BAA8BC,EAASK,MAEnD,MAAM6C,EAAYlD,EAASK,KAAK8C,GAC1BtF,QAAejE,GACf,MAAE+C,SAAgBkB,EAAOuF,mBAAmB,CAAEF,cAEhDvG,IACFjB,QAAQiB,MAAM,iCAAkCA,GAChDyF,MAAM,gCAAgCzF,EAAM0G,WAC5ClE,GAAa,GAEjB,CAAE,MAAOxC,GAAQ,IAAD2G,EAAAC,EACd7H,QAAQiB,MAAM,kBAAmBA,GACjCyF,MAAM,qBAAkC,QAAdkB,EAAA3G,EAAMqD,gBAAQ,IAAAsD,GAAM,QAANC,EAAdD,EAAgBjD,YAAI,IAAAkD,OAAN,EAAdA,EAAsBF,UAAW1G,EAAM0G,WACjElE,GAAa,EACf,GA6CmC6B,SAAA,EAC7BE,EAAAA,EAAAA,KAAA,KAAGN,UAAU,mBAAkBI,SAAC,8CAChCE,EAAAA,EAAAA,KAAA,UAAQsC,KAAK,SAAS5C,UAAU,wBAAwB6C,SAAUvE,EAAU8B,SACzE9B,EAAY,gBAAkB,aAAQE,EAAmBoC,QAAQ,0BAIpE,C","sources":["../node_modules/@stripe/stripe-js/dist/index.mjs","pages/payment.js"],"sourcesContent":["var RELEASE_TRAIN = 'basil';\n\nvar runtimeVersionToUrlVersion = function runtimeVersionToUrlVersion(version) {\n  return version === 3 ? 'v3' : version;\n};\n\nvar ORIGIN = 'https://js.stripe.com';\nvar STRIPE_JS_URL = \"\".concat(ORIGIN, \"/\").concat(RELEASE_TRAIN, \"/stripe.js\");\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar STRIPE_JS_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/(v3|[a-z]+)\\/stripe\\.js(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\n\nvar isStripeJSURL = function isStripeJSURL(url) {\n  return V3_URL_REGEX.test(url) || STRIPE_JS_URL_REGEX.test(url);\n};\n\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(ORIGIN, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!isStripeJSURL(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(STRIPE_JS_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"7.3.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise$1 = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function (cause) {\n    reject(new Error('Failed to load Stripe.js', {\n      cause: cause\n    }));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise$1 !== null) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise$1[\"catch\"](function (error) {\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var pk = args[0];\n  var isTestKey = pk.match(/^pk_test/); // @ts-expect-error this is not publicly typed\n\n  var version = runtimeVersionToUrlVersion(maybeStripe.version);\n  var expectedVersion = RELEASE_TRAIN;\n\n  if (isTestKey && version !== expectedVersion) {\n    console.warn(\"Stripe.js@\".concat(version, \" was loaded on the page, but @stripe/stripe-js@\").concat(\"7.3.0\", \" expected Stripe.js@\").concat(expectedVersion, \". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning\"));\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise) {\n    return stripePromise;\n  }\n\n  stripePromise = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n  return stripePromise;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import React, { useState, useEffect } from 'react';\r\nimport { useCart } from '../contexts/cartContext';\r\nimport { useNavigate, useLocation } from 'react-router-dom'; // Add useLocation\r\nimport axios from 'axios';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\r\nconst stripePromise = loadStripe('pk_test_51RNEmFPxiXl6gYuTxfzucygRKGJRsU3IIfkVCA580gF63522WkXs4la3gE6r6YAewOk1ngzRwFPgYy2SdcWkvdPO00brPbqZwl');\r\n\r\nconst PaymentComponent = () => {\r\n  const { cartItems, cartTotal, clearCart } = useCart();\r\n  const navigate = useNavigate();\r\n  const location = useLocation(); // Get location to access state\r\n  const [savedAddress, setSavedAddress] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Get totalAfterDiscount from location state, fallback to cartTotal\r\n  const totalAfterDiscount = location.state?.totalAfterDiscount || cartTotal;\r\n\r\n  useEffect(() => {\r\n    const loadAddress = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const storedAddress = JSON.parse(localStorage.getItem('userAddress'));\r\n        if (storedAddress && storedAddress.addressLine1) {\r\n          setSavedAddress(storedAddress);\r\n          return;\r\n        }\r\n\r\n        if (token) {\r\n          console.log('Fetching address from:', `${process.env.REACT_APP_API_BASE_URL}/api/customers/users/address`); // Debug log\r\n          const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/api/customers/users/address`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          if (response.data.address) {\r\n            setSavedAddress(response.data.address);\r\n            localStorage.setItem('userAddress', JSON.stringify(response.data.address));\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading address:', error);\r\n        try {\r\n          const storedAddress = JSON.parse(localStorage.getItem('userAddress'));\r\n          if (storedAddress && storedAddress.addressLine1) {\r\n            setSavedAddress(storedAddress);\r\n          } else {\r\n            setSavedAddress(null);\r\n          }\r\n        } catch (parseError) {\r\n          console.error('Error parsing userAddress:', parseError);\r\n          setSavedAddress(null);\r\n        }\r\n      }\r\n    };\r\n    loadAddress();\r\n  }, []);\r\n\r\n  const handleCheckout = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    const email = localStorage.getItem('email');\r\n    if (!email || email === 'undefined') {\r\n      alert('Please log in first.');\r\n      navigate('/Login');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (!savedAddress || !savedAddress.addressLine1) {\r\n      alert('Please add a shipping address.');\r\n      navigate('/cart');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const orderData = {\r\n      email,\r\n      items: cartItems.map((item) => ({\r\n        ProductID: item.ProductID,\r\n        ProductName: item.ProductName,\r\n        ProductPrice: parseFloat(item.ProductPrice),\r\n        ProductQuantity: item.quantity,\r\n        ProductImage: item.ProductImage,\r\n      })),\r\n      total: totalAfterDiscount, // Use discounted total\r\n      address: savedAddress,\r\n    };\r\n\r\n    console.log('Sending checkout data:', orderData);\r\n\r\n    try {\r\n      console.log('Creating checkout session at:', `${process.env.REACT_APP_API_BASE_URL}/api/customers/create-checkout-session`); // Debug log\r\n      const response = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/api/customers/create-checkout-session`, orderData);\r\n      console.log('Checkout session response:', response.data);\r\n\r\n      const sessionId = response.data.id;\r\n      const stripe = await stripePromise;\r\n      const { error } = await stripe.redirectToCheckout({ sessionId });\r\n\r\n      if (error) {\r\n        console.error('Error redirecting to Checkout:', error);\r\n        alert(`Failed to initiate checkout: ${error.message}`);\r\n        setIsLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Checkout error:', error);\r\n      alert(`Checkout failed: ${error.response?.data?.message || error.message}`);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment-container d-flex flex-column align-items-center\" style={{ minHeight: '100vh', padding: '20px' }}>\r\n      {savedAddress && (\r\n        <div className=\"mb-3 text-start w-100\" style={{ maxWidth: '350px' }}>\r\n          <h6>Delivery to:</h6>\r\n          <p>\r\n            {savedAddress.label}: {savedAddress.addressLine1}, {savedAddress.houseNo}, {savedAddress.building}\r\n            {savedAddress.landmark ? `, ${savedAddress.landmark}` : ''}{savedAddress.zipCode ? `, ${savedAddress.zipCode}` : ''}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"order-summary mb-4 w-100\" style={{ maxWidth: '350px' }}>\r\n        <h6>Order Summary</h6>\r\n        <p>Subtotal: ₹{cartTotal.toFixed(2)}</p>\r\n        <p>Discount: ₹{(cartTotal - totalAfterDiscount).toFixed(2)}</p>\r\n        <p><strong>Total: ₹{totalAfterDiscount.toFixed(2)}</strong></p>\r\n      </div>\r\n\r\n      <div className=\"creditcard mb-4\">\r\n        <div className=\"thecard-modern shadow-lg text-white p-4\" style={{ background: 'linear-gradient(135deg, #1e90ff, #00bfff)', borderRadius: '15px', width: '350px', height: '200px' }}>\r\n          <div className=\"card-top d-flex justify-content-between align-items-center mb-3\">\r\n            <div className=\"chip\" style={{ width: '40px', height: '30px', background: '#d4af37', borderRadius: '5px' }}></div>\r\n            <div className=\"brand\" style={{ fontSize: '24px', fontWeight: 'bold' }}>VISA</div>\r\n          </div>\r\n          <div className=\"card-number mb-3\" style={{ fontSize: '20px', letterSpacing: '2px' }}>\r\n            **** **** **** 0000\r\n          </div>\r\n          <div className=\"card-bottom d-flex justify-content-between\">\r\n            <div>\r\n              <div className=\"label\" style={{ fontSize: '12px' }}>Card Holder</div>\r\n              <div className=\"value\" style={{ fontSize: '16px' }}>Your Name</div>\r\n            </div>\r\n            <div>\r\n              <div className=\"label\" style={{ fontSize: '12px' }}>Expires</div>\r\n              <div className=\"value\" style={{ fontSize: '16px' }}>01 / 2026</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form p-3 mt-3 shadow bg-white rounded\" style={{ width: '350px' }}>\r\n        <form onSubmit={handleCheckout}>\r\n          <p className=\"text-center mb-3\">Click below to pay securely with Stripe.</p>\r\n          <button type=\"submit\" className=\"btn btn-success w-100\" disabled={isLoading}>\r\n            {isLoading ? 'Processing...' : `Pay ₹${totalAfterDiscount.toFixed(2)} with Stripe`}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentComponent;"],"names":["stripePromise","RELEASE_TRAIN","ORIGIN","STRIPE_JS_URL","concat","V3_URL_REGEX","STRIPE_JS_URL_REGEX","EXISTING_SCRIPT_MESSAGE","injectScript","params","queryString","advancedFraudSignals","script","document","createElement","src","headOrBody","head","body","Error","appendChild","stripePromise$1","onErrorListener","onLoadListener","loadScript","Promise","resolve","reject","window","Stripe","console","warn","url","scripts","querySelectorAll","i","length","test","findScript","_script$parentNode","removeEventListener","parentNode","removeChild","onLoad","cause","onError","addEventListener","error","loadCalled","getStripePromise","then","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","isTestKey","match","version","runtimeVersionToUrlVersion","expectedVersion","stripe","apply","undefined","_registerWrapper","name","registerWrapper","initStripe","loadStripe","PaymentComponent","_location$state","cartItems","cartTotal","clearCart","useCart","navigate","useNavigate","location","useLocation","savedAddress","setSavedAddress","useState","isLoading","setIsLoading","totalAfterDiscount","state","useEffect","async","token","localStorage","getItem","storedAddress","JSON","parse","addressLine1","log","response","axios","get","headers","Authorization","data","address","setItem","stringify","parseError","loadAddress","_jsxs","className","style","minHeight","padding","children","maxWidth","_jsx","label","houseNo","building","landmark","zipCode","toFixed","background","borderRadius","width","height","fontSize","fontWeight","letterSpacing","onSubmit","e","preventDefault","email","alert","orderData","items","map","item","ProductID","ProductName","ProductPrice","parseFloat","ProductQuantity","quantity","ProductImage","total","post","sessionId","id","redirectToCheckout","message","_error$response","_error$response$data","type","disabled"],"sourceRoot":""}