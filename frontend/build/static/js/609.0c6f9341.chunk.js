"use strict";(self.webpackChunkzepto2=self.webpackChunkzepto2||[]).push([[609],{6609:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var t=a(5043),r=a(6213),o=a(8231),n=a(579);const l=function(){const[e,s]=(0,t.useState)(1),[a,l]=(0,t.useState)({email:"",otp:"",newPassword:""}),[i,d]=(0,t.useState)(""),[c,p]=(0,t.useState)({}),m=(0,o.Zp)(),u=e=>{l({...a,[e.target.name]:e.target.value})};return(0,n.jsx)("div",{className:"forgot-password-container d-flex justify-content-center align-items-center",children:(0,n.jsxs)("div",{className:"card p-4 shadow forgot-password-card",children:[(0,n.jsx)("h2",{className:"text-center mb-4",children:"Forgot Password"}),1===e&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Enter your email",value:a.email,onChange:u,required:!0}),c.email&&(0,n.jsx)("small",{className:"text-danger",children:c.email})]}),(0,n.jsx)("button",{className:"btn btn-primary w-100",onClick:async()=>{if(a.email?(p({}),1):(p({email:"Email is required"}),0))try{console.log("Sending OTP to:","http://13.233.144.153/api/auth/forgot-password");const e=await r.A.post("http://13.233.144.153/api/auth/forgot-password",{email:a.email});alert(e.data.message),s(2)}catch(o){var e,t;alert((null===(e=o.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to send OTP")}},children:"Send OTP"})]}),2===e&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("input",{type:"text",name:"otp",className:"form-control",placeholder:"Enter OTP",value:a.otp,onChange:u,required:!0}),c.otp&&(0,n.jsx)("small",{className:"text-danger",children:c.otp})]}),(0,n.jsx)("button",{className:"btn btn-success w-100",onClick:async()=>{if(a.otp)try{console.log("Verifying OTP at:","http://13.233.144.153/api/auth/verify-otp-reset");const e=await r.A.post("http://13.233.144.153/api/auth/verify-otp-reset",{email:a.email,otp:a.otp});e.data.success&&(d(e.data.resetToken),s(3),alert(e.data.message))}catch(o){var e,t;alert((null===(e=o.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Error verifying OTP")}else p({otp:"OTP is required"})},children:"Verify OTP"})]}),3===e&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("input",{type:"password",name:"newPassword",className:"form-control",placeholder:"Enter new password",value:a.newPassword,onChange:u,required:!0}),c.newPassword&&(0,n.jsx)("small",{className:"text-danger",children:c.newPassword})]}),(0,n.jsx)("button",{className:"btn btn-success w-100",onClick:async()=>{if(a.newPassword)try{console.log("Resetting password at:","http://13.233.144.153/api/auth/reset-password");const e=await r.A.post("http://13.233.144.153/api/auth/reset-password",{resetToken:i,newPassword:a.newPassword});alert(e.data.message),m("/login")}catch(t){var e,s;alert((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Error resetting password")}else p({newPassword:"New password is required"})},children:"Reset Password"})]})]})})}}}]);
//# sourceMappingURL=609.0c6f9341.chunk.js.map