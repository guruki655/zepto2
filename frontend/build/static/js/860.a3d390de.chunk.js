"use strict";(self.webpackChunkzepto2=self.webpackChunkzepto2||[]).push([[860],{7860:(e,s,r)=>{r.r(s),r.d(s,{default:()=>d});var a=r(5043),o=r(8231),n=r(6213),t=r(4432),i=r(579);const d=()=>{const e=(0,o.Zp)(),s=(0,o.zy)(),{clearCart:r}=(0,t._)(),[d,l]=(0,a.useState)(null),[c,h]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{(async()=>{const a=new URLSearchParams(s.search).get("session_id");if(!a)return l("Invalid session. Please try again."),void h(!1);try{const s=localStorage.getItem("email"),o=JSON.parse(localStorage.getItem("userAddress")||"{}");if(!s||!o||!o.addressLine1)return l("Missing user information. Please log in and ensure an address is saved."),void h(!1);console.log("Saving order with:",{sessionId:a,email:s,address:o}),console.log("Saving order to:","http://13.233.144.153/api/customers/orders/save");const t=await n.A.post("http://13.233.144.153/api/customers/orders/save",{email:s,address:o,sessionId:a});console.log("Order saved:",t.data),r(),h(!1),e("/orders")}catch(d){var o,t;console.error("Error saving order:",d),l(`Failed to save order: ${(null===(o=d.response)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.message)||d.message}`),h(!1)}})()}),[s,e,r]),(0,i.jsx)("div",{className:"container mt-5 text-center",children:c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{children:"Processing Your Order..."}),(0,i.jsx)("p",{children:"Please wait while we finalize your order."})]}):d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{children:"Order Processing Failed"}),(0,i.jsx)("p",{children:d}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:()=>e("/cart"),children:"Return to Cart"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{children:"Order Placed Successfully!"}),(0,i.jsx)("p",{children:"Your order has been processed. Check your order history for details."}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:()=>e("/orders"),children:"View Order History"})]})})}}}]);
//# sourceMappingURL=860.a3d390de.chunk.js.map