{"version":3,"file":"static/js/415.20fba1c2.chunk.js","mappings":"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","sources":["pages/category.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useCart } from '../contexts/cartContext';\r\nimport '../styles/category.css';\r\n\r\nfunction CategoryPage() {\r\n  const { categoryName } = useParams();\r\n  const navigate = useNavigate();\r\n  const { addToCart, removeFromCart, cartItems } = useCart();\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [selectedSubcategory, setSelectedSubcategory] = useState(null);\r\n  const [sortOption, setSortOption] = useState('default');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        console.log('Fetching products from:', `${process.env.REACT_APP_API_BASE_URL}/api/customers`); // Debug log\r\n        const res = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/api/customers`);\r\n        const allProducts = res.data;\r\n\r\n        const normalizedCategory = categoryName.toLowerCase();\r\n        const filteredProducts = allProducts.filter(\r\n          (product) => product.ProductType.toLowerCase() === normalizedCategory\r\n        );\r\n\r\n        const filteredSubcategories = [\r\n          ...new Set(filteredProducts.map((product) => product.ProductSubType)),\r\n        ].sort();\r\n\r\n        setProducts(filteredProducts);\r\n        setSubcategories(filteredSubcategories);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching data:', err);\r\n        setError('Failed to load data. Please try again.');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [categoryName]);\r\n\r\n  const ProductCard = ({ product }) => {\r\n    const cartProduct = cartItems.find((item) => item.ProductID === product.ProductID);\r\n    const quantity = cartProduct ? cartProduct.quantity : 0;\r\n\r\n    return (\r\n      <div className=\"col-lg-3\" style={{ cursor: 'pointer', marginBottom: '20px' }}>\r\n        <div className=\"card h-100\" style={{ display: 'flex', flexDirection: 'column' }}>\r\n          <img\r\n            src={`data:image/png;base64,${product.ProductImage}`}\r\n            className=\"card-img-top\"\r\n            alt={product.ProductName}\r\n            style={{ height: '200px', objectFit: 'cover' }}\r\n          />\r\n          <div className=\"card-body\" style={{ flex: '1 1 auto', display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>\r\n            <div>\r\n              <h5 className=\"card-title\">{product.ProductName}</h5>\r\n              <p className=\"card-text\">Brand: {product.ProductBrand}</p>\r\n              <p className=\"card-text\">Price: â‚¹{product.ProductPrice}</p>\r\n              <div className=\"card-text\">\r\n                Rating:{' '}\r\n                {Array.from({ length: Math.floor(product.ProductRating || 1) }, (_, i) => (\r\n                  <i key={i} className=\"fas fa-star text-warning\" />\r\n                ))}\r\n                {Array.from({ length: 5 - Math.floor(product.ProductRating || 1) }, (_, i) => (\r\n                  <i key={i + Math.floor(product.ProductRating || 1)} className=\"far fa-star text-warning\" />\r\n                ))}\r\n              </div>\r\n            </div>\r\n            {cartProduct ? (\r\n              <div className=\"d-flex align-items-center mt-2\">\r\n                <button\r\n                  className=\"btn btn-sm btn-outline-secondary\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    removeFromCart(product.ProductID);\r\n                  }}\r\n                >\r\n                  -\r\n                </button>\r\n                <span className=\"mx-2\">{quantity}</span>\r\n                <button\r\n                  className=\"btn btn-sm btn-outline-secondary\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    addToCart(product);\r\n                  }}\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <button\r\n                className=\"btn btn-primary mt-2\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  addToCart(product);\r\n                }}\r\n              >\r\n                Add to Cart\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  let displayedProducts = selectedSubcategory\r\n    ? products.filter(\r\n        (product) => product.ProductSubType.toLowerCase() === selectedSubcategory.toLowerCase()\r\n      )\r\n    : products;\r\n\r\n  displayedProducts = [...displayedProducts].sort((a, b) => {\r\n    const priceA = parseFloat(a.ProductPrice);\r\n    const priceB = parseFloat(b.ProductPrice);\r\n    const ratingA = parseFloat(a.ProductRating);\r\n    const ratingB = parseFloat(b.ProductRating);\r\n\r\n    if (sortOption === 'price-low') {\r\n      return priceA - priceB;\r\n    } else if (sortOption === 'price-high') {\r\n      return priceB - priceA;\r\n    } else if (sortOption === 'rating-high') {\r\n      return ratingB - ratingA;\r\n    }\r\n    return 0;\r\n  });\r\n\r\n  return (\r\n    <div className=\"category-page\">\r\n      <div className=\"zepto-sidebar\">\r\n        <div className=\"-loop-sidebar-header\">\r\n          <h5>{categoryName} Subcategories</h5>\r\n          <button className=\"btn btn-close\" onClick={() => navigate('/')}></button>\r\n        </div>\r\n        <div className=\"zepto-sidebar-body\">\r\n          {loading ? (\r\n            <p>Loading subcategories...</p>\r\n          ) : error ? (\r\n            <p className=\"zepto-sidebar-error\">{error}</p>\r\n          ) : (\r\n            <ul>\r\n              {subcategories.length > 0 ? (\r\n                <>\r\n                  <li\r\n                    className={`zepto-sidebar-item ${selectedSubcategory === null ? 'active' : ''}`}\r\n                    onClick={() => setSelectedSubcategory(null)}\r\n                    style={{ cursor: 'pointer' }}\r\n                  >\r\n                    All\r\n                  </li>\r\n                  {subcategories.map((subcategory, index) => (\r\n                    <li\r\n                      key={index}\r\n                      className={`zepto-sidebar-item ${selectedSubcategory === subcategory ? 'active' : ''}`}\r\n                      onClick={() => setSelectedSubcategory(subcategory)}\r\n                      style={{ cursor: 'pointer' }}\r\n                    >\r\n                      {subcategory}\r\n                    </li>\r\n                  ))}\r\n                </>\r\n              ) : (\r\n                <li className=\"zepto-sidebar-item\">No subcategories available</li>\r\n              )}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"category-content\">\r\n        <h2>{categoryName}</h2>\r\n        <div className=\"sort-container\">\r\n          <select\r\n            className=\"sort-select\"\r\n            value={sortOption}\r\n            onChange={(e) => setSortOption(e.target.value)}\r\n          >\r\n            <option value=\"default\">Sort by: Default</option>\r\n            <option value=\"price-low\">Sort by: Price Low to High</option>\r\n            <option value=\"price-high\">Sort by: Price High to Low</option>\r\n            <option value=\"rating-high\">Sort by: Rating High to Low</option>\r\n          </select>\r\n        </div>\r\n        {loading ? (\r\n          <p>Loading products...</p>\r\n        ) : error ? (\r\n          <p className=\"zepto-sidebar-error\">{error}</p>\r\n        ) : displayedProducts.length > 0 ? (\r\n          <div className=\"row\" key=\"product-grid\" style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n            {displayedProducts.map((product) => (\r\n              <ProductCard key={product._id} product={product} />\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p>No products available for {selectedSubcategory || categoryName}.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CategoryPage;"],"names":["categoryName","useParams","navigate","useNavigate","addToCart","removeFromCart","cartItems","useCart","subcategories","setSubcategories","useState","products","setProducts","selectedSubcategory","setSelectedSubcategory","sortOption","setSortOption","loading","setLoading","error","setError","useEffect","async","console","log","allProducts","axios","get","data","normalizedCategory","toLowerCase","filteredProducts","filter","product","ProductType","filteredSubcategories","Set","map","ProductSubType","sort","err","fetchData","ProductCard","_ref","cartProduct","find","item","ProductID","quantity","_jsx","className","style","cursor","marginBottom","children","_jsxs","display","flexDirection","src","ProductImage","alt","ProductName","height","objectFit","flex","justifyContent","ProductBrand","ProductPrice","Array","from","length","Math","floor","ProductRating","_","i","onClick","e","stopPropagation","displayedProducts","a","b","priceA","parseFloat","priceB","ratingA","ratingB","_Fragment","subcategory","index","value","onChange","target","flexWrap","_id"],"sourceRoot":""}